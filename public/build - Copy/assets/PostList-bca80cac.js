import{o as u,f as c,b as o,a as v,w as h,u as b,i as w,t as B,e as y,g as k,Q as $,j as i,z as j,y as D,F as E,l as I,c as P}from"./app-8a1ff713.js";import{_ as R,a as U}from"./PostModal-9aa825e0.js";import{_}from"./AttachmentPreviewModal-0e7c2918.js";import{i as L}from"./BaseModal-b216c2d5.js";const N={class:"bg-white dark:bg-slate-900 dark:text-gray-100 transition-all border-2 border-transparent hover:border-indigo-500"},F={class:"flex items-center gap-2 py-2 px-2"},H=["src"],O={class:"flex justify-between flex-1"},z={class:"font-black hover:underline"},Q={key:0,class:"flex gap-1"},S={key:1},q=["disabled"],G=["selected"],J=["selected"],K=["disabled"],ee={__name:"UserListItem",props:{user:Object,forApprove:{type:Boolean,default:!1},showRoleDropdown:{type:Boolean,default:!1},disableRoleDropdown:{type:Boolean,default:!1}},emits:["approve","reject","roleChange","delete"],setup(e){return(t,a)=>(u(),c("div",N,[o("div",F,[v(b(w),{href:t.route("profile",e.user.username)},{default:h(()=>[o("img",{src:e.user.avatar_url,class:"w-[32px] rounded-full"},null,8,H)]),_:1},8,["href"]),o("div",O,[v(b(w),{href:t.route("profile",e.user.username)},{default:h(()=>[o("h3",z,B(e.user.name),1)]),_:1},8,["href"]),e.forApprove?(u(),c("div",Q,[o("button",{class:"text-xs py-1 px-2 rounded bg-emerald-500 hover:bg-emerald-600 text-white",onClick:a[0]||(a[0]=y(r=>t.$emit("approve",e.user),["prevent","stop"]))}," approve "),o("button",{class:"text-xs py-1 px-2 rounded bg-red-500 hover:bg-red-600 text-white",onClick:a[1]||(a[1]=y(r=>t.$emit("reject",e.user),["prevent","stop"]))}," reject ")])):k("",!0),e.showRoleDropdown?(u(),c("div",S,[o("select",{onChange:a[2]||(a[2]=r=>t.$emit("roleChange",e.user,r.target.value)),class:"rounded-md border-0 py-1 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 max-w-xs text-sm leading-6",disabled:e.disableRoleDropdown},[o("option",{selected:e.user.role==="admin"},"admin",8,G),o("option",{selected:e.user.role==="user"},"user",8,J)],40,q),o("button",{onClick:a[3]||(a[3]=r=>t.$emit("delete",e.user)),class:"text-xs py-1.5 px-2 rounded bg-gray-700 hover:bg-gray-800 text-white ml-3 disabled:bg-gray-500",disabled:e.disableRoleDropdown},"delete ",8,K)])):k("",!0)])])]))}},T={class:"overflow-auto"},te={__name:"PostList",props:{posts:Array},setup(e){const t=$(),a=$().props.auth.user,r=i(!1),f=i(!1),g=i({}),p=i({}),x=i(null),d=i({data:[],next:null});j(()=>t.props.posts,()=>{var s;t.props.posts&&(d.value={data:t.props.posts.data,next:(s=t.props.posts.links)==null?void 0:s.next})},{deep:!0,immediate:!0});function M(s){g.value=s,r.value=!0}function C(s,n){p.value={post:s,index:n},f.value=!0}function V(){g.value={id:null,body:"",user:a}}function A(){d.value.next&&L.get(d.value.next).then(({data:s})=>{d.value.data=[...d.value.data,...s.data],d.value.next=s.links.next})}return D(()=>{new IntersectionObserver(n=>n.forEach(m=>m.isIntersecting&&A()),{rootMargin:"-250px 0px 0px 0px"}).observe(x.value)}),(s,n)=>{var m;return u(),c("div",T,[(u(!0),c(E,null,I(d.value.data,l=>(u(),P(R,{key:l.id,post:l,onEditClick:M,onAttachmentClick:C},null,8,["post"]))),128)),o("div",{ref_key:"loadMoreIntersect",ref:x},null,512),v(U,{post:g.value,modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=l=>r.value=l),onHide:V},null,8,["post","modelValue"]),v(_,{attachments:((m=p.value.post)==null?void 0:m.attachments)||[],index:p.value.index,"onUpdate:index":n[1]||(n[1]=l=>p.value.index=l),modelValue:f.value,"onUpdate:modelValue":n[2]||(n[2]=l=>f.value=l)},null,8,["attachments","index","modelValue"])])}}};export{te as _,ee as a};
