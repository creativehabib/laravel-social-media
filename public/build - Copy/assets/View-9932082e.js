import{T as h,j as y,Q as S,h as B,o as e,f as i,a as t,w as a,b as o,k as Y,v as W,t as $,g as c,d as f,u as s,c as p,F as x,l as F}from"./app-8a1ff713.js";import{_ as X}from"./AuthenticatedLayout-58d86ad8.js";import b from"./TabItem-36080219.js";import{_}from"./PrimaryButton-4951ad11.js";import Z from"./InviteUserModal-154b6f0f.js";import{_ as ee,a as L}from"./PostList-bca80cac.js";import{_ as te}from"./TextInput-0d41f712.js";import{_ as oe}from"./GroupForm-2874d794.js";import{_ as re}from"./CreatePost-3bc9e0e4.js";import se from"./TabPhotos-afc778a3.js";import{r as M}from"./transition-3ca82db8.js";import{r as D,a as le,x as ae,I as ue,y as w,S as ne,g as k}from"./tabs-1b746d5a.js";import"./ApplicationLogo-6577eed8.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./BaseModal-b216c2d5.js";import"./PostModal-9aa825e0.js";import"./AttachmentPreviewModal-0e7c2918.js";import"./Checkbox-6b2247f8.js";const ie={class:"max-w-[768px] mx-auto h-full overflow-auto"},ce={class:"px-4"},de={key:0,class:"my-2 py-2 px-3 font-medium text-sm bg-red-400 text-white"},pe={class:"group relative bg-white dark:bg-slate-950 dark:text-gray-100"},me=["src"],ge={key:0,class:"absolute top-2 right-2"},fe={key:0,class:"bg-gray-50 hover:bg-gray-100 text-gray-800 py-1 px-2 text-xs flex items-center opacity-0 group-hover:opacity-100"},he=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3 mr-2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})],-1),ve={key:1,class:"flex gap-2 bg-white p-2 opacity-0 group-hover:opacity-100"},ye={class:"flex"},xe={class:"flex items-center justify-center relative group/thumbnail -mt-[64px] ml-[48px] w-[128px] h-[128px] rounded-full"},be=["src"],_e={key:0,class:"absolute left-0 top-0 right-0 bottom-0 bg-black/50 text-gray-200 rounded-full opacity-0 flex items-center justify-center group-hover/thumbnail:opacity-100"},we={key:1,class:"absolute top-1 right-0 flex flex-col gap-2"},ke={class:"flex justify-between items-center flex-1 p-4"},Ce={class:"font-bold text-lg"},je={class:"border-t m-4 mt-0"},Se={key:1,class:"py-8 text-center dark:text-gray-100"},Ie={key:1,class:"py-8 text-center dark:text-gray-100"},Te={class:"mb-3"},$e={class:"grid grid-cols-2 gap-3"},Ue={key:0,class:"grid grid-cols-2 gap-3"},Re=o("div",{class:"py-8 text-center dark:text-gray-100"}," There are no pending requests. ",-1),Ae=["innerHTML"],We={__name:"View",props:{errors:Object,success:{type:String},group:{type:Object},posts:Object,users:Array,requests:Array,photos:Array},setup(r){const m=h({thumbnail:null,cover:null}),v=y(!0),C=y(""),j=y(""),I=y(!1),N=y(""),T=S().props.auth.user,g=B(()=>d.group.role==="admin"),U=B(()=>d.group.role&&d.group.status==="approved"),d=r,R=h({name:S().props.group.name,auto_approval:!!parseInt(S().props.group.auto_approval),about:S().props.group.about});function G(n){if(m.cover=n.target.files[0],m.cover){const u=new FileReader;u.onload=()=>{C.value=u.result},u.readAsDataURL(m.cover)}}function z(n){if(m.thumbnail=n.target.files[0],m.thumbnail){const u=new FileReader;u.onload=()=>{j.value=u.result},u.readAsDataURL(m.thumbnail)}}function A(){m.cover=null,C.value=null}function V(){m.thumbnail=null,j.value=null}function O(){m.post(route("group.updateImages",d.group.slug),{preserveScroll:!0,onSuccess:()=>{v.value=!0,A(),setTimeout(()=>{v.value=!1},3e3)}})}function P(){m.post(route("group.updateImages",d.group.slug),{preserveScroll:!0,onSuccess:()=>{v.value=!0,V(),setTimeout(()=>{v.value=!1},3e3)}})}function q(){h({}).post(route("group.join",d.group.slug),{preserveScroll:!0})}function H(n){h({user_id:n.id,action:"approve"}).post(route("group.approveRequest",d.group.slug),{preserveScroll:!0})}function J(n){h({user_id:n.id,action:"reject"}).post(route("group.approveRequest",d.group.slug),{preserveScroll:!0})}function E(n){if(console.log("111"),!window.confirm(`Are you sure you want to remove user "${n.name}" from this group?`))return!1;h({user_id:n.id}).delete(route("group.removeUser",d.group.slug),{preserveScroll:!0})}function K(n,u){console.log(n,u),h({user_id:n.id,role:u}).post(route("group.changeRole",d.group.slug),{preserveScroll:!0})}function Q(){R.put(route("group.update",d.group.slug),{preserveScroll:!0})}return(n,u)=>(e(),i(x,null,[t(X,null,{default:a(()=>[o("div",ie,[o("div",ce,[Y(o("div",{class:"my-2 py-2 px-3 font-medium text-sm bg-emerald-500 text-white"},$(r.success),513),[[W,v.value&&r.success]]),r.errors.cover?(e(),i("div",de,$(r.errors.cover),1)):c("",!0),o("div",pe,[o("img",{src:C.value||r.group.cover_url||"/img/default_cover.jpg",class:"w-full h-[200px] object-cover"},null,8,me),g.value?(e(),i("div",ge,[C.value?(e(),i("div",ve,[o("button",{onClick:A,class:"bg-gray-50 hover:bg-gray-100 text-gray-800 py-1 px-2 text-xs flex items-center"},[t(s(M),{class:"h-3 w-3 mr-2"}),f(" Cancel ")]),o("button",{onClick:O,class:"bg-gray-800 hover:bg-gray-900 text-gray-100 py-1 px-2 text-xs flex items-center"},[t(s(D),{class:"h-3 w-3 mr-2"}),f(" Submit ")])])):(e(),i("button",fe,[he,f(" Update Cover Image "),o("input",{type:"file",class:"absolute left-0 top-0 bottom-0 right-0 opacity-0",onChange:G},null,32)]))])):c("",!0),o("div",ye,[o("div",xe,[o("img",{src:j.value||r.group.thumbnail_url||"/img/default_avatar.webp",class:"w-full h-full object-cover rounded-full"},null,8,be),g.value&&!j.value?(e(),i("button",_e,[t(s(le),{class:"w-8 h-8"}),o("input",{type:"file",class:"absolute left-0 top-0 bottom-0 right-0 opacity-0",onChange:z},null,32)])):g.value?(e(),i("div",we,[o("button",{onClick:V,class:"w-7 h-7 flex items-center justify-center bg-red-500/80 text-white rounded-full"},[t(s(M),{class:"h-5 w-5"})]),o("button",{onClick:P,class:"w-7 h-7 flex items-center justify-center bg-emerald-500/80 text-white rounded-full"},[t(s(D),{class:"h-5 w-5"})])])):c("",!0)]),o("div",ke,[o("h2",Ce,$(r.group.name),1),s(T)?c("",!0):(e(),p(_,{key:0,href:n.route("login")},{default:a(()=>[f(" Login to join to this group ")]),_:1},8,["href"])),g.value?(e(),p(_,{key:1,onClick:u[0]||(u[0]=l=>I.value=!0)},{default:a(()=>[f(" Invite Users ")]),_:1})):c("",!0),s(T)&&!r.group.role&&r.group.auto_approval?(e(),p(_,{key:2,onClick:q},{default:a(()=>[f(" Join to Group ")]),_:1})):c("",!0),s(T)&&!r.group.role&&!r.group.auto_approval?(e(),p(_,{key:3,onClick:q},{default:a(()=>[f(" Request to join ")]),_:1})):c("",!0)])])])]),o("div",je,[t(s(ae),null,{default:a(()=>[t(s(ue),{class:"flex bg-white dark:bg-slate-950 dark:text-white"},{default:a(()=>[t(s(w),{as:"template"},{default:a(({selected:l})=>[t(b,{text:"Posts",selected:l},null,8,["selected"])]),_:1}),U.value?(e(),p(s(w),{key:0,as:"template"},{default:a(({selected:l})=>[t(b,{text:"Users",selected:l},null,8,["selected"])]),_:1})):c("",!0),g.value?(e(),p(s(w),{key:1,as:"template"},{default:a(({selected:l})=>[t(b,{text:"Pending Requests",selected:l},null,8,["selected"])]),_:1})):c("",!0),t(s(w),{as:"template"},{default:a(({selected:l})=>[t(b,{text:"Photos",selected:l},null,8,["selected"])]),_:1}),t(s(w),{as:"template"},{default:a(({selected:l})=>[t(b,{text:"About",selected:l},null,8,["selected"])]),_:1})]),_:1}),t(s(ne),{class:"mt-2"},{default:a(()=>[t(s(k),null,{default:a(()=>[r.posts?(e(),i(x,{key:0},[t(re,{group:r.group},null,8,["group"]),r.posts.data.length?(e(),p(ee,{key:0,posts:r.posts.data,class:"flex-1"},null,8,["posts"])):(e(),i("div",Se," There are no posts in this group. Be the first and create it. "))],64)):(e(),i("div",Ie," You don't have permission to view these posts. "))]),_:1}),U.value?(e(),p(s(k),{key:0},{default:a(()=>[o("div",Te,[t(te,{"model-value":N.value,placeholder:"Type to search",class:"w-full"},null,8,["model-value"])]),o("div",$e,[(e(!0),i(x,null,F(r.users,l=>(e(),p(L,{user:l,key:l.id,"show-role-dropdown":g.value,"disable-role-dropdown":r.group.user_id===l.id,class:"shadow rounded-lg",onRoleChange:K,onDelete:E},null,8,["user","show-role-dropdown","disable-role-dropdown"]))),128))])]),_:1})):c("",!0),g.value?(e(),p(s(k),{key:1,class:""},{default:a(()=>[r.requests.length?(e(),i("div",Ue,[(e(!0),i(x,null,F(r.requests,l=>(e(),p(L,{user:l,key:l.id,"for-approve":!0,class:"shadow rounded-lg",onApprove:H,onReject:J},null,8,["user"]))),128))])):c("",!0),Re]),_:1})):c("",!0),t(s(k),null,{default:a(()=>[t(se,{photos:r.photos},null,8,["photos"])]),_:1}),t(s(k),null,{default:a(()=>[g.value?(e(),i(x,{key:0},[t(oe,{form:s(R)},null,8,["form"]),t(_,{onClick:Q},{default:a(()=>[f(" Submit ")]),_:1})],64)):(e(),i("div",{key:1,class:"ck-content-output dark:text-gray-100",innerHTML:r.group.about},null,8,Ae))]),_:1})]),_:1})]),_:1})])])]),_:1}),t(Z,{modelValue:I.value,"onUpdate:modelValue":u[1]||(u[1]=l=>I.value=l)},null,8,["modelValue"])],64))}};export{We as default};
